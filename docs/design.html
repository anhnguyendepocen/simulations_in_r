<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Designing Simulations | Conducting Monte Carlo Simulations in R</title>
  <meta name="description" content="This short book contains the materials for my workshop: Conducting Simulations in R." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Designing Simulations | Conducting Monte Carlo Simulations in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This short book contains the materials for my workshop: Conducting Simulations in R." />
  <meta name="github-repo" content="okanbulut/simulations_in_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Designing Simulations | Conducting Monte Carlo Simulations in R" />
  
  <meta name="twitter:description" content="This short book contains the materials for my workshop: Conducting Simulations in R." />
  

<meta name="author" content="Okan Bulut" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="run.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://sites.google.com/ualberta.ca/okanbulut/">Okan Bulut &copy;</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#why-simulations"><i class="fa fa-check"></i><b>1.2</b> Why Simulations?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#typical-simulation-scenarios"><i class="fa fa-check"></i><b>1.3</b> Typical Simulation Scenarios</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#additional-resources"><i class="fa fa-check"></i><b>1.4</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="design.html"><a href="design.html"><i class="fa fa-check"></i><b>2</b> Designing Simulations</a><ul>
<li class="chapter" data-level="2.1" data-path="design.html"><a href="design.html#simulation-factors"><i class="fa fa-check"></i><b>2.1</b> Simulation Factors</a></li>
<li class="chapter" data-level="2.2" data-path="design.html"><a href="design.html#evaluation-criteria"><i class="fa fa-check"></i><b>2.2</b> Evaluation Criteria</a></li>
<li class="chapter" data-level="2.3" data-path="design.html"><a href="design.html#other-design-elements"><i class="fa fa-check"></i><b>2.3</b> Other Design Elements</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="run.html"><a href="run.html"><i class="fa fa-check"></i><b>3</b> Running Simulations</a><ul>
<li class="chapter" data-level="3.1" data-path="run.html"><a href="run.html#custom-functions"><i class="fa fa-check"></i><b>3.1</b> Custom Functions</a></li>
<li class="chapter" data-level="3.2" data-path="run.html"><a href="run.html#debugging-the-code"><i class="fa fa-check"></i><b>3.2</b> Debugging the Code</a><ul>
<li class="chapter" data-level="3.2.1" data-path="run.html"><a href="run.html#custom-messages"><i class="fa fa-check"></i><b>3.2.1</b> Custom Messages</a></li>
<li class="chapter" data-level="3.2.2" data-path="run.html"><a href="run.html#messages-and-warnings"><i class="fa fa-check"></i><b>3.2.2</b> Messages and Warnings</a></li>
<li class="chapter" data-level="3.2.3" data-path="run.html"><a href="run.html#interactive-debugging-with-browser"><i class="fa fa-check"></i><b>3.2.3</b> Interactive Debugging with <code>browser()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="run.html"><a href="run.html#putting-the-functions-together"><i class="fa fa-check"></i><b>3.3</b> Putting the Functions Together</a><ul>
<li class="chapter" data-level="3.3.1" data-path="run.html"><a href="run.html#avoding-loops"><i class="fa fa-check"></i><b>3.3.1</b> Avoding Loops</a></li>
<li class="chapter" data-level="3.3.2" data-path="run.html"><a href="run.html#loops"><i class="fa fa-check"></i><b>3.3.2</b> Loops</a></li>
<li class="chapter" data-level="3.3.3" data-path="run.html"><a href="run.html#parallel-computing"><i class="fa fa-check"></i><b>3.3.3</b> Parallel Computing</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="run.html"><a href="run.html#benchmarking"><i class="fa fa-check"></i><b>3.4</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="summarise.html"><a href="summarise.html"><i class="fa fa-check"></i><b>4</b> Summarizing Simulation Results</a><ul>
<li class="chapter" data-level="4.1" data-path="summarise.html"><a href="summarise.html#tables-and-figures"><i class="fa fa-check"></i><b>4.1</b> Tables and Figures</a></li>
<li class="chapter" data-level="4.2" data-path="summarise.html"><a href="summarise.html#exporting-the-results"><i class="fa fa-check"></i><b>4.2</b> Exporting the Results</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/okanbulut/simulations_in_r" target="blank">Published with GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Conducting Monte Carlo Simulations in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="design" class="section level1">
<h1><span class="header-section-number">2</span> Designing Simulations</h1>
<p><img src="figure/galymzhan-abdugalimov-ICW6QYOcdlg-unsplash.jpg" /></p>
<p>To better explain the steps of conducting a Monte Carlo simulation study, let’s assume a hypothetical research scenario in which a researcher wants to examine item parameter estimation in item response theory (IRT). Here the researcher aims to determine the robustness of parameter estimation for the 3PL model, especially when the sample size is small.</p>
<div id="simulation-factors" class="section level2">
<h2><span class="header-section-number">2.1</span> Simulation Factors</h2>
<p>The researcher can investigate the impact of several factors (i.e., conditions) within the same study but the goal is to create a feasible study with the factors that are essential for this study. Therefore, the following factors are selected:</p>
<ul>
<li>Test length (10, 15, 20, or 25 items)</li>
<li>Sample size (250, 500, 750, or 1000 examinees)</li>
<li>Whether or not the guessing (c) parameter should be fixed for all items (e.g., <span class="math inline">\(c = 0.16\)</span>)</li>
</ul>
<p>Let’s see the total number of conditions from these factors:</p>
<p>4 (test length) x 4 (sample size) x 2 (fixed guessing or free estimation) = 32 conditions</p>
<p>This calculation assumes that these factors are <strong>fully crossed</strong>. Two factors are fully crossed when each level of one factor occurs in combination with each level of the other factor. However, some factors may not be crossed with the other factors. These are called <strong>nested</strong> factors. Two factors are nested when each level of a factor occurs in combination with different levels of another factor (see <a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/j.2041-210x.2012.00251.x">Schielzeth and Nakagawa’s paper</a> for more information about crossed and nested factors).</p>
</div>
<div id="evaluation-criteria" class="section level2">
<h2><span class="header-section-number">2.2</span> Evaluation Criteria</h2>
<p>The researcher is interested in <strong>accuracy</strong>. Therefore, we have to use several measures of accuracy to evaluate the simulation results. Some of these measures (i.e., indices) include:</p>
<ul>
<li><p><strong>Bias:</strong> <span class="math inline">\(bias = \frac{1}{R} \Sigma_{r=1}^{R} (\hat{x_r}-x)\)</span>, where <span class="math inline">\(R\)</span> is the number of replications, <span class="math inline">\(\hat{x_r}\)</span> is the estimated value of the parameter, and <span class="math inline">\(x\)</span> is the true value of the parameter. Bias, which can be either positive or negative, should be close to zero for higher accuracy.</p></li>
<li><p><strong>Root-mean square error (RMSE):</strong> <span class="math inline">\(RMSE = \sqrt{\frac{1}{R} \Sigma_{r=1}^{R} (\hat{x_r}-x)^2}\)</span>, where <span class="math inline">\(R\)</span> is the number of replications, <span class="math inline">\(\hat{x_r}\)</span> is the estimated value of the parameter, and <span class="math inline">\(x\)</span> is the true value of the parameter. RMSE, which is either zero or a positive value, should be close to zero for higher accuracy.</p></li>
<li><p><strong>(Pearson) Correlation:</strong> <span class="math inline">\(\rho(x,\hat{x}) = \frac{\text{cov}(x,\hat{x})}{\sigma_x \sigma_{\hat{x}}}\)</span>, where <span class="math inline">\(\hat{x_r}\)</span> is the estimated value of the parameter, <span class="math inline">\(x\)</span> is the true value of the parameter, the numerator is the covariance of the two parameters, and the denominator is the product of their standard deviations. Correlation should be closer to 1 as the accuracy increases.</p></li>
</ul>
<p>Note that there are other types of evaluation criteria, such as power, type I error, relative efficiency, precision, and recall. In this study, the accuracy measures listed above should be adequate for evaluating the accuracy of estimated item paramaters. We will discuss how the simulation results with these evaluation criteria can be summarized and presented in Part <a href="summarise.html#summarise">4</a> of this book.</p>
</div>
<div id="other-design-elements" class="section level2">
<h2><span class="header-section-number">2.3</span> Other Design Elements</h2>
<p><strong>Item and ability parameters:</strong> The researcher must use either a fixed set of item parameters from an existing instrument or simulated item parameters similar to those from an existing instrument. Thus, the researcher uses the distributions provided in <span class="citation">Casabianca and Lewis (<a href="#ref-casa2015" role="doc-biblioref">2015</a>)</span>’s article based on a 2008 National Mathematics Assessment:</p>
<ul>
<li><span class="math inline">\(a \sim N(1.13, 0.25)\)</span></li>
<li><span class="math inline">\(b \sim N(0.21, 0.51)\)</span></li>
<li><span class="math inline">\(c \sim N(0.16, 0.05)\)</span></li>
</ul>
<p>For the ability distribution, ability values are drawn from a normal distribution, <span class="math inline">\(\theta \sim N(0, 1)\)</span>.</p>
<p><strong>Number of replications:</strong> The number of replications should be adequate to create enough variation in the simulation. The higher the number of replications, the longer the simulation study will take. Therefore, it is important to choose a suitable number. Typically, 100 replications are enough for this type of simulation study. We can test this by increasing the number of iterations to 150 and check whether the overall results would change substantially.</p>
<p><strong>Replication mechanism:</strong> In a typical Monte Carlo simulation study, the levels of simulation factors remain fixed, while the data, parameters, and other parts vary. In other words, these are the parts that we actually simulate. For the sake of simplicity, some of these parts can be generated once while the other parts continuously change from one replication to another. In this study, the researcher does not have a specific set of item parameters to test. Instead, the goal of the study is more general: investigating the impact of the identified simulation factors on item parameter estimation. Therefore, unique sets of item parameters, ability values, and response data can be generated with each replication.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-casa2015">
<p>Casabianca, Jodi M., and Charles Lewis. 2015. “IRT Item Parameter Recovery with Marginal Maximum Likelihood Estimation Using Loglinear Smoothing Models.” <em>Journal of Educational and Behavioral Statistics</em> 40 (6): 547–78. <a href="https://doi.org/10.3102/1076998615606112">https://doi.org/10.3102/1076998615606112</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="run.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/okanbulut/simulations_in_r/tree/master/01-design.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["simulations_in_r.pdf", "simulations_in_r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
